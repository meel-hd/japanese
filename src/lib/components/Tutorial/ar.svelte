<script lang="ts">
    import Toggle from "../Keyboard/Toggle.svelte";

    let step = 1;
    let visible = localStorage.getItem("hide-tutorial") != "yes";
    let hideCheckbox = false;
    let progress = 20;

    const numberOfSteps = 5;

    function next() {
        if (step < numberOfSteps) {
            step++;
        } else {
            step = 1;
        }
        progress += 100 / numberOfSteps;
        scrollTop();
    }

    function back() {
        if (step > 1) {
            step--;
        } else {
            step = numberOfSteps;
        }
        progress -= 100 / numberOfSteps;
        scrollTop();
    }

    function scrollTop() {
        const element = document.getElementById("tutorial-model");
        element.scrollTop = 0;
    }
    function done() {
        if (hideCheckbox) {
            localStorage.setItem("hide-tutorial", "yes");
        }
        visible = false;
        step = 1;
        progress = 20;
    }
</script>

{#if visible}
    <main id="tutorial-model" class="themed-shadow">
        <div style="width: {progress}%" id="progress">{" "}</div>
        {#if step == 1}
            <div id="head">
                <h2>{" "}</h2>
            </div>
        {/if}
        <div id="content">
            {#if step == 1}
                <h2>ุฏุฑุณ ุงูุจุฏุงูุฉ</h2>
                <p>
                    ุชุณุชุนูู ุงููุบุฉ ุงููุงุจุงููุฉ
                    <span id="hd"> ุซูุงุซ </span>
                    ุงููุงุน ูุฎุชููุฉ ูููุชุงุจุฉ. ุงูุฃููู ู ุงูุซุงููุฉุ
                    <span id="hd"> ุงูููุฑุงุฌุงูุง </span>
                    ู
                    <span id="hd"> ุงููุชุงูุงูุง </span>
                    ุ ููุซููู ุงูุงุจุฌุฏูุฉ. ุฃูุง ุงููุฌููุนุฉ ุงูุซุงูุซุฉ
                    <span id="hd"> ูุงูุฌู </span>ุ ุชูุซู ูููุงุช ูุงููุฉ. ูู ูู
                    ุงูุซูุงุซุฉ ูุณุชุนูู ูู ุงููุบุฉ ุงููุงุจุงููุฉ
                </p>{/if}
            {#if step == 2}
                <h2>ููุฑุงุฌุงูุง</h2>
                <p>
                    ุชุชููู ูู <span id="highlighted">46</span>
                    ุญุฑู ููุซููู ูุทุน ุตูุชูุฉ. ูู ุญุฑู ููุซู ุตูุช ูุงุญุฏ ุฃู ูุฒูุฌ ูู ุงูุฃุตูุงุช
                </p>
                <p>
                    <span id="hd"> ุงูููุฑุงุฌุงูุง </span>
                    ุชุณุชุฎุฏู ูู ุงูููุงู ุงูุฃูู ูููููุงุช
                    <span id="hd"> ุงููุงุจุงููุฉ ุงูุฃุตููุฉ </span>
                    ู ูุนูุงุตุฑ ูููุญู ู ูุชุตุฑูู ุงูุฃูุนุงู ู ููุงูุงุช ุงููููุงุช.ู ุชุนุชุจุฑ ุฃููู
                    ุงููุชุงุจุงุช ุงูุชู ูุชุนูููุง ุงูุฃุทูุงูุ ู ุชุณุนูู ูุซูุฑุง ูู ุงูููุงู ุงูููููุฉ
                    ุฎุตูุตุง ูู ุงููุญุงุฏุซุงุช ุฏุงุช ุทุงุจุน ุบูุฑ ุฑุณูู
                </p>
            {/if}
            {#if step == 3}
                <h2>ูุชุงูุงูุง</h2>
                <p>
                    <span id="hd"> ุนูู ุบุฑุงุฑ ููุฑุงุบุงูุง </span>
                    ุ ุชุชุฃูู ุงููุงุชุงูุงูุง ูู 46 ุญุฑู ุงูุถุง. ูููุซููู ูู ุญุฑู ููุทุน ุตูุชู ุฃู
                    ุตูุชุงู. ุชุณูุญ ุจุชูุซูู
                    <span id="hd"> ุงููููุงุช ุงูุฃุฌูุจูุฉ </span>
                    ุ ูุงููููุงุช ุงูููุชุฑุถุฉุ ูุงููุตุทูุญุงุช ุงูุนูููุฉุ ูุงูุชุดุฏูุฏ ุนูู ุจุนุถ ุงููููุงุช
                    ุฃู ุงูุนุจุงุฑุงุช
                </p>
                <p>
                    ูุชุณุชุฎุฏู ุนุงุฏุฉ ูุชุฑุฌูุฉ ุงููููุงุช ุบูุฑ ุงููุงุจุงููุฉ ุฅูู ุงููุงุจุงููุฉ. ููู
                    ุชุณุชุฎุฏู ุฃูุถุง ูู ูุชุงุจุฉ ูููุงุช ูู ุฃุตู ุฃุฌูุจูุ ุจูุง ูู ุฐูู ุฃุณูุงุก
                    ุงูุฃุดุฎุงุต ูุงูุฃูุงูู ูุงูุฃุดูุงุก ูู ูุบุงุช ุฃุฎุฑู
                </p>
                <p>
                    ุจูุนุฑูุฉ ุงูููุฑุงุบุงูุง ูุงููุงุชุงูุงูุง ูููู ูููุฑุก ุฃู ูููู ูู ุฃุณุงุณ
                    <span id="hd"> ุฌูุฏ </span>
                    ูู
                    <span id="hd">ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ </span>
                    ุจุงููุบุฉ ุงููุงุจุงููุฉ
                </p>
            {/if}
            {#if step == 4}
                <h2>ูุงูุฌู</h2>
                <p>
                    ูุนูู
                    <span id="hd"> ุนูุณ </span>
                    ุงูููุฑุงุบุงูุง ูุงููุงุชุงูุงูุงุ ุชุชุฃูู ูุงูุฌู ูู
                    <span id="hd"> ุขูุงู </span>
                    ุงูุญุฑูู ุงูุชู ุชูุซู
                    <span id="hd"> ูููุงุช ุฃู ุฃููุงุฑ </span>
                    ููู ุญุฑู ููุซู ูุทุนุฉุ ููู ูุญุฏุฉ ุฐุงุช ูุบุฒู ุชููู ูููููุง ุฃู ูุนูู ูุญุฏุฏ
                </p>
                <p>
                    ููุฏ ุงุณุชูุฏุช ูุงูุฌู ุญุฑูููุง ูู
                    <span id="hd">ุงููุบุฉ ุงูุตูููุฉ </span>
                    ูุฅุนุชูุฏุชูุง ูู ูุธุงู ุงููุชุงุจุฉ ุงููุงุจุงูู. ุฅููุง ุณูุงุช ููุฌุบุฑุงููุฉุ ุจูุนูู
                    ุฃู ูู ุญุฑู ููุซู ูููุฉ ูุงููุฉ ุฃู ูููููุงู ุจุฏูุงู ูู ุฃุตูุงุช ูุฌุฑุฏุฉ ุจุฏูู
                    ูุนูู
                </p>
                <p>
                    ุนุฏุฏ ุญุฑูู ูุงูุฌู ุงูููุฌูุฏุฉ
                    <span id="hd"> ูุจูุฑ ุฌุฏุง </span>
                    ุ ููู ุญูููุฉ ุงููุงุจุงู ูุฏ ุฃูุงูุช ูุฌููุนุฉ ูู ุญุฑูู ูุงูุฌู ุดุงุฆุนุฉ ุงูุงุณุชุฎุฏุงูุ
                    ูุชุดูู ูุฐู ุงููุฌููุนุฉ ูุง ููุฑุจ ูู 2136 ุญุฑู ุชุนุชุจุฑ ุฃุณุงุณูุฉ ูููุฑุงุกุฉ ูุงููุชุงุจุฉ
                    ูู ุฅุณุชุนูุงูุงุช ูู ููู
                </p>
                <p>
                    ุชุนูู ูุงูุฌู ูุนุชุจุฑ ุฌุฒุก ููู ูู ุฅุชูุงู ุงููุบุฉ ุงููุงุจุงููุฉุ ูุฃููุง
                    ุชููุฑ ูููุง ุฃุนูู ูููุฑุฏุงุช ูุซูุงูุฉ ุงููุบุฉ ุงููุงุจุงููุฉ
                </p>
            {/if}
            {#if step == 5}
                <h2>๐ ุงูุฎุทูุงุช</h2>
                <p>
                    <span id="highlighted"> 1 ุงูุฎุทูุฉ<br /></span>

                    ุชุนูู ุงูุฃุจุฌุฏูุฉ ูุงููุทู. ุงูููุฑุงุบุงูุง ูุงููุงุชุงูุงูุง ูุบุทูู ูู
                    ุงูุฃุตูุงุชุ ูู ุงููุงูุน ููููู ูุชุงุจุฉ ุงููุงุจุงููุฉ ูุงููุง ููุท ูู
                    <span id="hd"> ุงููุงูุง </span>
                    : (ููุฑุบุงูุง + ูุงุชุงูุงูุง)
                </p>
                <p>
                    <span id="highlighted"> ุงูุฎุทูุฉ 2<br /></span>
                    ุชุนูู ุงูููุฑุฏุงุช ุงูุฃุณุงุณูุฉ ูุงููุญู ุนู ุทุฑูู ุชุนูู ุงููุงูุฌู ุงูุชู ุชุบุทู
                    ูู ุงููููุงุช ุงูุชู ุชุญุชุงุฌูุง ูููุญุงุฏุซุงุช ุงูููููุฉ ูุงูููุฑุฏุงุช ุงูุจุณูุทุฉ
                </p>
                <p>
                    <span id="highlighted">ุงูุฎุทูุฉ 3<br /></span>
                    ูุฑุงุกุฉ ุงููุชุจ ุงููุฏุฑุณูุฉ ูุงุณุชุฎุฏุงู ุงูุชุทุจููุงุช ููุณ ูุงููุงู ูุชููู ูุชูุฑุณุงู
                    ุจุงููุงุจุงููุฉ.ุจู ูุดุงูุฏุฉ ุงูุงููุงู ููุฑุงุกุฉ ุงููุงูุฌุง ุฃู ุงูุฅุณุชูุงุน ููุจูุฏูุณุงุช
                    ูููู ุฃู ูุญุณู ููุงุฑุงุชู
                </p>
            {/if}
            {#if step == numberOfSteps}
                <div id="final-check">
                    <input
                        id="cje"
                        type="checkbox"
                        on:change={(e) => {
                            // @ts-ignore
                            hideCheckbox = e.target.checked;
                        }}
                        checked={hideCheckbox}
                    />
                    <label for="cje"> ุฃุฎูู ุงููุฑุฉ ุงููุงุฏูุฉ</label>
                </div>
            {/if}

            <div id="bottom">
                {#if step != 1}
                    <button id="back" on:click={back}>ุฅุฑุฌุน</button>
                {:else}
                    <button id="back" on:click={() => (visible = false)}
                        >!ุชุฎุทู ุญุชู ูุงุญูุง</button
                    >
                {/if}
                {#if step != numberOfSteps}
                    <button on:click={next}>ุงูุชุงูู</button>
                {:else}
                    <button on:click={done}>!ููููู</button>
                {/if}
            </div>
        </div>
    </main>
{/if}
<Toggle
    key="e"
    toggle={() => {
        visible = true;
    }}
/>

<style>
    main {
        width: 70vw;
        height: 70vh;
        z-index: 200;
        position: absolute;
        top: 50%;
        left: 50%;
        padding: 20px 50px;
        border-radius: 20px;
        background-color: var(--bg);
        transform: translate(-50%, -50%);
        overflow-y: scroll;
        text-align: right;
    }
    #head {
        display: flex;
        justify-content: space-around;
        align-items: center;
    }
    #head h2 {
        text-align: center;
        font-size: 60px;
        color: var(--primary);
    }
    #head h2::before {
        content: "ใใซใก";
    }
    #head h2:hover::before {
        content: "!ูุฑุญุจุง";
    }
    #progress {
        height: 5px;
        background-color: var(--primary);
        border-radius: 999px;
        transition: width 0.5s ease-out;
    }
    #content {
        margin-top: 2vh;
        display: flex;
        flex-direction: column;
        /* justify-content: center; */
    }
    #content p {
        width: 60vw;
        margin-left: auto;
        margin-right: auto;
        font-size: larger;
        line-height: 40px;
        text-align: right;
    }
    #bottom {
        display: flex;
        justify-content: space-between;
        margin-top: 50px;
        margin-bottom: 50px;
        padding: 0 40px;
    }
    #bottom button {
        width: 120px;
        height: 45px;
        border-radius: 10px;
        background-color: var(--primary);
        color: white;
        font-size: 12;
        font-weight: 500;
    }
    #bottom #back {
        background-color: transparent;
        color: var(--primary);
        font-weight: bold;
    }
    #highlighted,
    #hd {
        color: var(--primary);
    }
    #final-check {
        margin-bottom: -20px;
        display: flex;
        justify-content: end;
    }

    @media (max-width: 768px) {
        main {
            padding: 20px;
            width: 80vw;
            height: 80vh;
        }
        #bottom {
            padding: 0 10px;
        }
    }
</style>
